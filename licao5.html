<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Lição 5: Laço While</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="background"></div>
    <div id="container">
        <div id="menu-container">
            <h1>Desafio dos Códigos</h1>
            <button onclick="irParaModoPrincipal()">Modo Principal</button>
            <button onclick="irParaModoDesafio()">Modo Desafio</button>
        </div>
        <div id="licao-container">
            <h1>Lição 5: Laço While</h1>
            <p class="intro">
                O laço <code>while</code> é utilizado para repetir um bloco de código enquanto uma condição específica for verdadeira. Ele é muito útil quando não sabemos com antecedência quantas vezes queremos executar um bloco de código.
            </p>
            <h2>Exemplo:</h2>
            <pre><code>let contador = 0;

while (contador < 5) {
    console.log("O valor do contador é: " + contador);
    contador++;
}</code></pre>
            <h2>Exercício</h2>
            <p>Complete o código abaixo para imprimir os números de 1 a 10 no console:</p>
            <textarea id="codigo5" rows="10" placeholder="// Seu código aqui"></textarea>
            <button class="menu-button" onclick="executarCodigo5()">Executar Código</button>
            <div class="output-section">
                <p><strong>Saída:</strong></p>
                <div id="saida5"></div>
            </div>
            <div class="button-container">
                <button onclick="irParaModoPrincipal()" class="menu-button">Voltar ao Menu</button>
                <button id="botaoDica5" class="hint-button" onclick="mostrarDica5()">Dica</button>
                <button id="proxima-licao" onclick="irParaProximaLicao()" class="menu-button">Próxima Lição</button>
            </div>
        </div>
    </div>
    <script src="script.js"></script>
    <script>
        let licaoResolvida5 = false; // Variável para rastrear se a lição foi resolvida

        // Esconde o menu quando a página da lição for carregada
        document.getElementById('menu-container').style.display = 'none';

        // Função para executar o código e mostrar a saída
        function executarCodigo5() {
            const codigo5 = document.getElementById('codigo5').value; // Obtém o código do textarea
            const saida5 = document.getElementById('saida5');
            saida5.innerHTML = ''; // Limpa a saída anterior

            // Captura a saída do console.log
            const originalConsoleLog5 = console.log;
            console.log = function (message) {
                saida5.innerHTML += message + '<br>'; // Adiciona a mensagem à div de saída
            };

            try {
                // Usa o Function para executar o código fornecido
                const funcao5 = new Function(codigo5);
                funcao5(); // Executa a função

                // Verifica se o código contém a lógica correta
                if (codigo5.includes("while") && codigo5.includes("console.log") && codigo5.includes("contador++")) {
                    licaoResolvida5 = true; // Marca a lição como resolvida
                    document.getElementById('proxima-licao').style.display = 'block'; // Exibe o botão da próxima lição
                } else {
                    licaoResolvida5 = false;
                    alert("Por favor, complete a lição corretamente antes de prosseguir.");
                }
            } catch (erro) {
                // Se houver um erro, exibe a mensagem de erro
                saida5.innerHTML = 'Erro: ' + erro.message;
                licaoResolvida5 = false;
            } finally {
                // Restaura o console.log original
                console.log = originalConsoleLog5;
            }
        }

        // Função para mostrar uma dica no textarea
        function mostrarDica5() {
            document.getElementById('codigo5').value = `let contador = 1;\n\nwhile (contador <= 10) {\n    // Seu código aqui\n    contador++;\n}`;
        }


        // Função para navegar para Modo Principal
        function irParaModoPrincipal() {
            window.location.href = 'index.html'; // Retorna ao menu principal
        }

        // Função para navegar para Modo Desafio
        function irParaModoDesafio() {
            window.location.href = 'desafio.html'; // Assumindo a criação de desafio.html
        }

        // Função para navegar para a próxima lição
        function irParaProximaLicao() {
            if (licaoResolvida5) {
                window.location.href = 'fim.html'; // Navega para o arquivo fim.html
            } else {
                alert('Complete a Lição 5 antes de prosseguir!'); // Alerta se a lição não foi resolvida
            }
        }
    </script>
</body>
</html>
